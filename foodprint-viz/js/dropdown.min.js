/*! project-name v0.0.1 | (c) 2020 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
function appendDropdown(e,t,o){const s=d3.select(".dropdown--"+t);if(e<=768)o.forEach(e=>{s.append("option").attr("class","option").attr("value",e.key).text(e.label)});else{s.style("display","none");let e=d3.select(".dropdown-container--"+t).append("div").attr("id","dropdown--"+t).attr("class","dropdown dropdown--meal dropdown--"+t).attr("onclick","toggleDropdownDisplay(event.target)");e.append("div").attr("class","dropdown-header"),e.append("div").attr("class","dropdown-options hide-options");let n=d3.select(".dropdown--"+t+" .dropdown-header");n.append("div").attr("class","dropdown-selection").text("Select a "+t),n.append("div").attr("class","dropdown-arrow--container").append("span").attr("class","dropdown-arrow");let a=d3.select(".dropdown--"+t+" .dropdown-options");o.forEach(e=>{a.append("div").attr("class","option").attr("id",e.key).attr("onclick","handleDropdownSelection(event.target)").text(e.label)}),d3.select(".dropdown--swap--"+t).style("display","none");let d=d3.select(".dropdown-container--swap--"+t).append("div").attr("id","dropdown--swap--"+t).attr("class","dropdown dropdown--swap dropdown--swap--"+t).attr("onclick","toggleDropdownDisplay(event.target)");d.append("div").attr("class","dropdown-header"),d.append("div").attr("class","dropdown-options hide-options");let l=d3.select(".dropdown--swap--"+t+" .dropdown-header");l.append("div").attr("class","dropdown-selection").text("Select a swap"),l.append("div").attr("class","dropdown-arrow--container").append("span").attr("class","dropdown-arrow")}}function toggleDropdownDisplay(e){if(e.parentNode.parentNode.classList.contains("dropdown")||e.parentNode.parentNode.parentNode.classList.contains("dropdown")){const t=e.closest(".dropdown"),o=t.querySelector(".dropdown-options");t.classList.contains("dropdown--meal")&&null!==document.querySelector("#tooltip-swap-impact.visible")&&hideSwapImpact(),t.parentNode.classList.contains("disabled")||(o.classList.contains("hide-options")?(t.classList.add("open"),o.classList.remove("hide-options")):(t.classList.remove("open"),o.classList.add("hide-options")))}}function closeDropdowns(){const e=document.getElementsByClassName("dropdown-options");for(let t of e)t.classList.contains("hide-options")||(t.parentNode.classList.remove("open"),t.classList.add("hide-options"))}function closeTooltip(e){const t=document.getElementById("tooltip-category");document.getElementById("tooltip-swap-impact");!e.parentNode.classList.contains("tooltip")&&t.classList.contains("visible")&&hideCategoryTooltip()}function handleDropdownSelection(e){let t=[];function o(){t[0]=e.childNodes[0].innerText,t[1]=e.childNodes[2].innerText}e.classList.contains("child-label")?(e=e.parentNode,o()):3===e.childNodes.length&&o();let s="",n=e.parentNode.firstChild;for(;n;)n.classList.contains("active")&&(s=n.id,n.classList.remove("active")),n=n.nextSibling;e.classList.add("active");const a=e.parentNode.parentNode,d=a.querySelector(".dropdown-selection");if(0!==t.length){const e=d3.select("#"+a.id+" .dropdown-selection");e.text(""),e.append("span").classed("swap-child",!0).text(t[0]),e.append("span").classed("swap-child icon-swap",!0),e.append("span").classed("swap-child",!0).text(t[1])}else d.textContent=e.innerText;const l=a.classList[2].substring("dropdown--".length);if("meal"===a.classList[1].substring("dropdown--".length)){addMeal(l,s,e.id);const t=a.parentNode.parentNode.querySelector(".dropdown-container--swap--"+l);fillSwapDropdown(l,e.id,t)}else swapIngredient(l.substring(6),e.id)}function handleSelectChange(e){let t="";const o=e[e.selectedIndex];let s=e.getElementsByTagName("option")[1];for(;s;)s.classList.contains("active")&&(t=s,s.classList.remove("active")),s=s.nextSibling;o.classList.add("active");const n=e.id.substring("dropdown--".length);if("meal"===e.classList[1].substring("dropdown--".length)){addMeal(n,t.value?t.value:"",o.value);const s=e.parentNode.parentNode.querySelector(".dropdown-container--swap--"+n);fillSwapSelect(n,o.value,s)}else swapIngredient(n.slice(0,-6),e.value)}function fillSwapDropdown(e,t,o){const s=menusDetail[e].find(e=>e.key===t).swaps;let n=d3.select("#dropdown--swap--"+e+" .dropdown-options");d3.select("#dropdown--swap--"+e+" .dropdown-selection").text("Select a swap"),n.selectAll(".option").remove(),s.forEach(e=>{n.append("div").attr("class","reset"===e.key?"option reset hidden":"option").attr("id",e.key).text(e.label).attr("onclick","handleDropdownSelection(event.target)"),void 0!==e.label?d3.select("#"+e.key).text(e.label):(d3.select("#"+e.key).append("span").attr("class","child-label label1").text(e.label1),d3.select("#"+e.key).append("span").attr("class","child-label icon-swap"),d3.select("#"+e.key).append("span").attr("class","child-label label2").text(e.label2))}),o.classList.contains("disabled")&&o.classList.remove("disabled")}function fillSwapSelect(e,t,o){const s=menusDetail[e].find(e=>e.key===t).swaps;let n=d3.select("#dropdown--"+e+"--swap");const a=o.querySelector(".dropdown");for(;a.length>1;)a.remove(1);a.selectedIndex=0,s.forEach(e=>{n.append("option").attr("class","option").attr("value",e.key).text(()=>void 0!==e.label?e.label:e.label1+" â†’ "+e.label2)}),o.classList.contains("disabled")&&(o.classList.remove("disabled"),o.querySelector("select").disabled=!1)}document.addEventListener("click",e=>{let t=!1;(e.target.classList.contains("dropdown-selection")||e.target.classList.contains("dropdown-arrow--container")||e.target.classList.contains("swap-child"))&&(t=!0);const o=e.target.parentNode.parentNode;null!==o&&void 0!==o.classList&&t||(closeDropdowns(),closeTooltip(e.target))});